ê¹€ì¤€í˜¸
foxmon_
In a call

ish.isha
 added 
fleo_
 to the group. â€” Yesterday at 10:50 PM
ish.isha
 started a call. â€” Yesterday at 10:50 PM
ish.isha
[DAD]
 â€” Yesterday at 10:52 PM
ì‚´ì˜ê°€ ì˜¬ë¼ì™€ìš”?
ê¹€ì¤€í˜¸ â€” Yesterday at 10:54 PM
ì§€ê¸ˆ
í•´ì•¼í•˜ëŠ”ê±°.
fleo_ â€” Yesterday at 11:06 PM
ã…‡ã…‡
ê¹€ì¤€í˜¸ â€” Yesterday at 11:07 PM
http://ishisha.iptime.org:30000/
hobom-infra
123456qwer!
pipeline {
  agent any

  tools {
    nodejs 'node-20'
  }
Expand
message.txt
5 KB
ish.isha
[DAD]
 â€” Yesterday at 11:24 PM
hobom.infra@gmail.com
ê¹€ì¤€í˜¸ â€” Yesterday at 11:51 PM
http://ishisha.iptime.org:30000/job/for-hobom-baceknd-develop/configure
withCredentials([file(credentialsId: env.ENV_FILE_CRED, variable: 'ENV_FILE')]) {
          sh '''
            if [ -f "$ENV_FILE" ]; then
              cp "$ENV_FILE" deploy/.env
            fi
          '''
        }
fleo_ â€” 12:09 AM
https://jenakim47.tistory.com/73
Jen's Space
Jenkins Pipeline Github Private Token ì‚¬ìš©í•˜ì—¬ ì—°ë™
ë³´ì•ˆì„ ìœ„í•´ì„œ Github Private Repo ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. í”„ë¼ì´ë¹— ì €ì¥ì†Œë¥¼ Jenkinsì™€ ì—°ë™í•˜ëŠ” ë°©ë²•ì—ëŠ” 1. ssh private, public key ì‚¬ìš© 2. token ì‚¬ìš© ë‘ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ì´ë²ˆì— ë‘ë²ˆì§¸ ë°©ë²•ì„ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤. ì°¸ê³ ë¡œ tokenì„ ë°œê¸‰ë°›ì€ ì´í›„ì—ëŠ” git bashì—ì„œ git clone, pu...
Jenkins Pipeline Github Private Token ì‚¬ìš©í•˜ì—¬ ì—°ë™
ê¹€ì¤€í˜¸ â€” 12:12 AM
http://ishisha.iptime.org:30000/job/for-hobom-baceknd-develop/credentials/
ê¹€ì¤€í˜¸ â€” 12:20 AM
http://ishisha.iptime.org:30000/job/for-hobom-baceknd-develop/job/develop/7/console
http://ishisha.iptime.org:30000/job/for-hobom-baceknd-develop/job/develop/lastFailedBuild/console
http://ishisha.iptime.org:30000/job/for-hobom-baceknd-develop/job/develop/lastFailedBuild/console
ê¹€ì¤€í˜¸ â€” 12:27 AM
http://ishisha.iptime.org:30000/job/for-hobom-baceknd-develop/job/develop/9/console
withCredentials([file(credentialsId: env.ENV_FILE_CRED, variable: 'ENV_FILE')]) {
          sh '''
            if [ -f "$ENV_FILE" ]; then
              cp "$ENV_FILE" deploy/.env
            fi
          '''
        }
hobom-infra
ish.isha
[DAD]
 â€” 12:30 AM
hobom-infra-token
hobom-infra-signin
ê¹€ì¤€í˜¸ â€” 12:33 AM
Environment=PATH=/usr/local/bin:/usr/bin:/bin
DB
HOBOM_SYSTEM_BACKEND_LION_DB=mongodb+srv://hobom:HoBom1031@hobom-system-lion-db.ag3ygsp.mongodb.net/hobom-system-backend-lion-db?retryWrites=true&w=majority&appName=hobom-system-lion-db

SALT
HOBOM_GEN_SALT=10

PORT
HOBOM_BACKEND_PORT=8080

JWT
HOBOM_JWT_SIGN_EXPIRED_AT=5m
HOBOM_JWT_SECRET=IloveHoBom1031^
HOBOM_JWT_ACCESS_TOKEN_EXPIRED=7d
HOBOM_JWT_REFRESH_TOKEN_EXPIRED=30d

Discord
HOBOM_DISCORED_WEBHOOK_URL=https://discord.com/api/webhooks/1396840755674353775/rUo_NRYz6e4bnGZ4jsTkRE8cHs9J_jWncV3J_VsHJFDZqufSQBxRp32oTf-vsDPQBsmd
Attachment file type: unknown
.env
547 bytes
ish.isha
[DAD]
 â€” 12:40 AM
hobom-infra-env
ê¹€ì¤€í˜¸ â€” 12:41 AM
pipeline {
  agent any

  options {
    timestamps()
    disableConcurrentBuilds()
Expand
message.txt
6 KB
fleo_ â€” 12:52 AM
sudo mkdir -p ${env.DEPLOY_DIR}
sudo chown -R ${env.DEPLOY_USER}:${env.DEPLOY_USER} ${env.DEPLOY_DIR}
ish.isha
[DAD]
 â€” 12:55 AM
chown ${env.DEPLOY_USER}:${env.DEPLOY_USER} ${env.DEPLOY_DIR}/.env
sh "sudo chown ${env.DEPLOY_USER}:${env.DEPLOY_USER} ${env.DEPLOY_DIR}/.env"
sh "chown ${env.DEPLOY_USER}:${env.DEPLOY_USER} ${env.DEPLOY_DIR}/.env"
ê¹€ì¤€í˜¸ â€” 12:59 AM
pipeline {
  agent any

  options {
    timestamps()
    disableConcurrentBuilds()
Expand
message.txt
6 KB
[Pipeline] { (Install dependencies)
[Pipeline] sh
00:59:50  + node -v
00:59:50  /var/jenkins_home/workspace/or-hobom-baceknd-develop_develop@tmp/durable-9827b086/script.sh.copy: 1: node: not found
[Pipeline] }
ê¹€ì¤€í˜¸ â€” 1:09 AM
deploy-ssh-key
fleo_ â€” 1:12 AM
https://k-sky.tistory.com/832
engineering blog
[Jenkins] ì„œë²„ì— ìë™ ë°°í¬í•˜ê¸° ìœ„í•œ Jenkins Credentials ...
1. Jenkinsì˜ credintialsì´ë€?ì‚¬ìš©ì, ìŠ¤í¬ë¦½íŠ¸, ë˜ëŠ” jenkins ìì²´ê°€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì•ˆì „í•˜ê²Œ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆë„ë¡ ì¸ì¦ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì˜ë¯¸Jenkinsì˜ ì¸ì¦ ì •ë³´ ê´€ë¦¬ ì‹œìŠ¤í…œì€ ë‹¤ì–‘í•œ ì¸ì¦ ì •ë³´ë¥¼ ì§€ì›ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸: ê°€ì¥ ì¼ë°˜ì ì¸ ì¸ì¦ ë°©...
[Jenkins] ì„œë²„ì— ìë™ ë°°í¬í•˜ê¸° ìœ„í•œ Jenkins Credentials ...
ê¹€ì¤€í˜¸ â€” 1:13 AM
ssh-keygen -t rsa -b 4096 -C "hobom"
fleo_ â€” 1:14 AM
SHA256:qwHLdbsa81LuxDjg2iMlzeSi9uk/Q57tS/RRMFmKV3k hobom
ish.isha
[DAD]
 â€” 1:16 AM
infra-admin
fleo_ â€” 1:17 AM
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDKUV/p9jIz1HJl/uF+12nArXQiA2DJdt16zBTKWifeFoqwELapbr/CwxYXFJxNRmbN2TUqBSIvv3+Nc2wE1Fh8ewIpbLFtJe8sk7KwRez4ofYCbaXHF7utJcXknKzbarNx5c9bcEzUQHaxeOg167LjKUU3DxfeMoIbcpvwcK+FV8bJ353sbWO1nRIZtogXFHiz851RsUtW4Zw3Zb+fdcEObDRiX7R9KhRQgfeb0Rp2mkN7MjirZ/bF+jPRH1O143YJ9hHmHCBLdx5VI4YRzh023kwP1eT2hRS0CBc8KaFR5FHZ2/GOAFZv3PHuU7CfxCPHnOyLlv22BoQkMpcuu/3fW1C23Xp7aiGAADHn1bEQfX7DXXc94LUGmWlk+x8bgMnxF3mYRalfY9zlFfeOmBRXtOfurAwhufxCmxCAykWhvvTQYF5idIrlbY7lxEQaSA/OsMrmQRdSxg0OcB5T4kP4bJodiGLx7JUp7T4tSxcrEJGNmR43eZCJ2k/cduQGfX4afUfJdwwg1uZZrV7vJSX6pCG+oOsfIw0aeScDCcveiQ+/Sl8DbAjB/31BKMjRsxk6p0WBuijSdlARQx4ELeC7ufeZukVOQ6yjQBBmOFNflOIcuUIjEwek+I5lGBzhjAUf575w0A/vShAE1/OKIvH9nbBMklJbQQxXJsbJSsEtNw== hobom
ish.isha
[DAD]
 â€” 1:33 AM
ssh -i /path/to/private_key infra-admin@ishisha.iptime.org -p22223
ê¹€ì¤€í˜¸ â€” 1:39 AM
01:38:57  [ssh-agent] Using credentials infra-admin (deploy-ssh-key)
01:38:57  $ ssh-agent
01:38:57  SSH_AUTH_SOCK=/tmp/ssh-BqqnyiWroWyO/agent.5435
01:38:57  SSH_AGENT_PID=5438
01:38:57  Running ssh-add (command line suppressed)
[Pipeline] // sshagent
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy to server (systemd))
ssh -o StrictHostKeyChecking=no ìœ ì €@í˜¸ìŠ¤íŠ¸'echo OK && whoami && hostname'
ish.isha
[DAD]
 â€” 1:46 AM
ishisha.iptime.org
host
infra-admin
-p7777
-p 7777
ê¹€ì¤€í˜¸ â€” 1:47 AM
DEPLOY_HOST     = 'ishisha.iptime.org -p 7777'
ish.isha
[DAD]
 â€” 1:49 AM
22223
ê¹€ì¤€í˜¸ â€” 1:55 AM
https://www.yes24.com/product/goods/11481543
ì˜ˆìŠ¤24
ë”œë ˆë§ˆ - ì˜ˆìŠ¤24
ë”°ëœ»í•œ í•œ ì¡°ê°ì˜ ë¹µ ëƒ„ìƒˆëŠ” ì¸ê°„ì˜ ì„ ì˜ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹ ê¹Œ? ìœ ëŸ½ ìµœê³ ì˜ ì§€ì„±ì§‘ë‹¨ í”„ë‘ìŠ¤ êµ­ë¦½ê³¼í•™ì—°êµ¬ì†Œ(CNRS)ì˜ ê±°ë‘, í”„ë‘ìŠ¤ í˜„ëŒ€ ì² í•™ì ë¤¼ë°© ì˜¤ì§€ì•™ì´ ì œì‹œí•˜ëŠ” ë„ë•ì² í•™ì˜ ì‚¬ê³ ì‹¤í—˜ 19ê°€ì§€ê°€ ë‹´ê¸´ ì±…ì´ë‹¤. ì±…ì— ë‹´ê¸´ 19ê°€ì§€ ë”œë ˆë§ˆëŠ” â€˜ê¸°ê²ŒìŠ¤ì˜ ë°˜ì§€â€™...
Image
https://product.kyobobook.co.kr/detail/S000000625441
https://product.kyobobook.co.kr/detail/S000201932024
https://product.kyobobook.co.kr/detail/S000001290624
ê¹€ì¤€í˜¸ â€” 2:11 AM
[Pipeline] sshagent
02:08:16  [ssh-agent] Using credentials infra-admin (deploy-ssh-key)
02:08:16  $ ssh-agent
02:08:16  SSH_AUTH_SOCK=/tmp/ssh-qDSc6nJkzeoO/agent.8277
02:08:16  SSH_AGENT_PID=8280
02:08:16  Running ssh-add (command line suppressed)
02:08:16  Identity added: /var/jenkins_home/workspace/or-hobom-baceknd-develop_develop@tmp/private_key_11747825477025473143.key (hobom-key)
02:08:16  [ssh-agent] Started.
[Pipeline] {
[Pipeline] sh
02:08:16  /var/jenkins_home/workspace/or-hobom-baceknd-develop_develop@tmp/durable-3c8d7a35/script.sh.copy: 3: Bad substitution
[Pipeline] }
02:08:16  $ ssh-agent -k
02:08:16  unset SSH_AUTH_SOCK;
02:08:16  unset SSH_AGENT_PID;
02:08:16  echo Agent pid 8280 killed;
02:08:16  [ssh-agent] Stopped.
[Pipeline] // sshagent
ish.isha
[DAD]
 â€” 2:15 AM
pipeline {
  agent any

  tools {
    nodejs 'node-20'
  }

  options {
    timestamps()
    disableConcurrentBuilds()
  }

  environment {
    APP_NAME        = 'for-hobom-backend'
    SERVICE_NAME    = 'for-hobom-backend'
    ENTRY_FILE      = 'dist/main.js'

    // â˜…â˜…â˜… ìˆ˜ì •ë¨: DEPLOY_HOSTì™€ DEPLOY_PORT ë¶„ë¦¬ â˜…â˜…â˜…
    DEPLOY_HOST     = 'ishisha.iptime.org'
    DEPLOY_PORT     = '22223'
    DEPLOY_USER     = 'infra-admin'
    DEPLOY_DIR      = '/srv/for-hobom-backend'

    SSH_CRED_ID     = 'deploy-ssh-key'     // SSH private key (ì„œë²„ ì ‘ì†)
    ENV_FILE_CRED   = 'hobom-infra-env'    // âœ… Jenkins Secret file (ì„œë²„ìš© .env)
  }

  stages {
    stage('Checkout') {
      steps {
        checkout scm
        sh 'git --no-pager log -1 --pretty=oneline'
      }
    }

    stage('Install dependencies') {
      steps {
        // tools ë¸”ë¡ì´ Node.jsë¥¼ PATHì— ì¶”ê°€í•´ì£¼ë¯€ë¡œ node -v && npm -vëŠ” í•„ìš” ì—†ìŠµë‹ˆë‹¤.
        sh 'npm ci'
      }
    }

    stage('Lint & Test') {
      steps {
        sh '''
          npm run lint || true
          npm run test || true
        '''
      }
      post {
        always {
          junit allowEmptyResults: true, testResults: 'reports/junit/**/*.xml'
        }
      }
    }

    stage('Build') {
      steps { sh 'npm run build' }
      post {
        success { archiveArtifacts artifacts: 'dist/**/*', onlyIfSuccessful: true }
      }
    }

    stage('Package for deploy (include .env from credentials)') {
      steps {
        sh '''
          rm -rf deploy && mkdir -p deploy
          cp -r dist deploy/dist
          cp package.json package-lock.json deploy/
          [ -d prisma ] && cp -r prisma deploy/prisma || true
          [ -d public ] && cp -r public deploy/public || true
        '''
        withCredentials([file(credentialsId: env.ENV_FILE_CRED, variable: 'ENV_FILE')]) {
          sh '''
            install -m 600 "$ENV_FILE" deploy/.env
          '''
        }
        sh 'tar -C deploy -czf deploy.tgz .'
      }
    }

    stage('Verify SSH to target') {
      steps {
        sshagent (credentials: [env.SSH_CRED_ID]) {
          // â˜…â˜…â˜… ìˆ˜ì •ë¨: -p ì˜µì…˜ ì¶”ê°€ ë° DEPLOY_HOST ë¶„ë¦¬ â˜…â˜…â˜…
          sh "ssh -o StrictHostKeyChecking=no -p ${env.DEPLOY_PORT} ${env.DEPLOY_USER}@${env.DEPLOY_HOST} 'echo OK && whoami && hostname'"
        }
      }
    }

    stage('Deploy to server (systemd)') {
      when {
        allOf {
          anyOf { branch 'develop'; branch 'main' }
          not { changeRequest() }
        }
      }
      steps {
        sshagent (credentials: [env.SSH_CRED_ID]) {
          sh '''
... (105 lines left)
Collapse
message.txt
7 KB
ï»¿
pipeline {
  agent any

  tools {
    nodejs 'node-20'
  }

  options {
    timestamps()
    disableConcurrentBuilds()
  }

  environment {
    APP_NAME        = 'for-hobom-backend'
    SERVICE_NAME    = 'for-hobom-backend'
    ENTRY_FILE      = 'dist/main.js'

    // â˜…â˜…â˜… ìˆ˜ì •ë¨: DEPLOY_HOSTì™€ DEPLOY_PORT ë¶„ë¦¬ â˜…â˜…â˜…
    DEPLOY_HOST     = 'ishisha.iptime.org'
    DEPLOY_PORT     = '22223'
    DEPLOY_USER     = 'infra-admin'
    DEPLOY_DIR      = '/srv/for-hobom-backend'

    SSH_CRED_ID     = 'deploy-ssh-key'     // SSH private key (ì„œë²„ ì ‘ì†)
    ENV_FILE_CRED   = 'hobom-infra-env'    // âœ… Jenkins Secret file (ì„œë²„ìš© .env)
  }

  stages {
    stage('Checkout') {
      steps {
        checkout scm
        sh 'git --no-pager log -1 --pretty=oneline'
      }
    }

    stage('Install dependencies') {
      steps {
        // tools ë¸”ë¡ì´ Node.jsë¥¼ PATHì— ì¶”ê°€í•´ì£¼ë¯€ë¡œ node -v && npm -vëŠ” í•„ìš” ì—†ìŠµë‹ˆë‹¤.
        sh 'npm ci'
      }
    }

    stage('Lint & Test') {
      steps {
        sh '''
          npm run lint || true
          npm run test || true
        '''
      }
      post {
        always {
          junit allowEmptyResults: true, testResults: 'reports/junit/**/*.xml'
        }
      }
    }

    stage('Build') {
      steps { sh 'npm run build' }
      post {
        success { archiveArtifacts artifacts: 'dist/**/*', onlyIfSuccessful: true }
      }
    }

    stage('Package for deploy (include .env from credentials)') {
      steps {
        sh '''
          rm -rf deploy && mkdir -p deploy
          cp -r dist deploy/dist
          cp package.json package-lock.json deploy/
          [ -d prisma ] && cp -r prisma deploy/prisma || true
          [ -d public ] && cp -r public deploy/public || true
        '''
        withCredentials([file(credentialsId: env.ENV_FILE_CRED, variable: 'ENV_FILE')]) {
          sh '''
            install -m 600 "$ENV_FILE" deploy/.env
          '''
        }
        sh 'tar -C deploy -czf deploy.tgz .'
      }
    }

    stage('Verify SSH to target') {
      steps {
        sshagent (credentials: [env.SSH_CRED_ID]) {
          // â˜…â˜…â˜… ìˆ˜ì •ë¨: -p ì˜µì…˜ ì¶”ê°€ ë° DEPLOY_HOST ë¶„ë¦¬ â˜…â˜…â˜…
          sh "ssh -o StrictHostKeyChecking=no -p ${env.DEPLOY_PORT} ${env.DEPLOY_USER}@${env.DEPLOY_HOST} 'echo OK && whoami && hostname'"
        }
      }
    }

    stage('Deploy to server (systemd)') {
      when {
        allOf {
          anyOf { branch 'develop'; branch 'main' }
          not { changeRequest() }
        }
      }
      steps {
        sshagent (credentials: [env.SSH_CRED_ID]) {
          sh '''
            # â˜…â˜…â˜… ìˆ˜ì •ë¨: ssh ëª…ë ¹ì–´ì— -p ì˜µì…˜ ì¶”ê°€ â˜…â˜…â˜…
            scp -o StrictHostKeyChecking=no -P ${env.DEPLOY_PORT} deploy.tgz ${env.DEPLOY_USER}@${env.DEPLOY_HOST}:/tmp/${env.APP_NAME}.tgz

            ssh -o StrictHostKeyChecking=no -p ${env.DEPLOY_PORT} ${env.DEPLOY_USER}@${env.DEPLOY_HOST} << 'EOF'
    set -e

    # 0) Node ì—†ìœ¼ë©´ ì„¤ì¹˜ (ëŒ€ë¹„ìš©)
    if ! command -v node >/dev/null 2>&1; then
      if [ -f /etc/debian_version ]; then
        curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
        sudo apt-get update -y && sudo apt-get install -y nodejs
      elif [ -f /etc/redhat-release ] || [ -f /etc/centos-release ] || [ -f /etc/rocky-release ]; then
        curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
        sudo yum install -y nodejs
      elif [ -f /etc/amazon-linux-release ]; then
        curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
        sudo dnf install -y nodejs || sudo yum install -y nodejs
      else
        echo "Unsupported distro: please pre-install Node 20+"
        exit 1
      fi
    fi

    # 1) ë°°í¬ ë””ë ‰í† ë¦¬
    sudo mkdir -p ${DEPLOY_DIR}
    sudo chown -R ${DEPLOY_USER}:${DEPLOY_USER} ${DEPLOY_DIR}

    # 2) íŒ¨í‚¤ì§€ ì „ê°œ (.env í¬í•¨)
    tar -xzf /tmp/${APP_NAME}.tgz -C ${DEPLOY_DIR}
    cd ${DEPLOY_DIR}

    # ğŸ”’ .env ê¶Œí•œ/ì†Œìœ ê¶Œ ë³´ê°•
    chmod 600 ${DEPLOY_DIR}/.env
    
    # â˜…â˜…â˜… ìˆ˜ì •ë¨: ì…¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²• ì˜¤ë¥˜ ìˆ˜ì • â˜…â˜…â˜…
    chown ${DEPLOY_USER}:${DEPLOY_USER} ${DEPLOY_DIR}/.env

    # 3) prod deps ì„¤ì¹˜
    npm ci --omit=dev

    # 4) systemd ìœ ë‹› ì„¤ì •
    NODE_BIN="\\$(command -v node || true)"
    if [ -z "\\$NODE_BIN" ]; then echo "node not found"; exit 1; fi

    # ì•ˆì „: .env í™•ì¸
    if [ ! -f "${DEPLOY_DIR}/.env" ]; then
      echo "ERROR: ${DEPLOY_DIR}/.env not found"
      exit 1
    fi

    sudo bash -c 'cat > /etc/systemd/system/${SERVICE_NAME}.service' <<SERVICE
    [Unit]
    Description=${APP_NAME} service
    After=network-online.target
    Wants=network-online.target

    [Service]
    Type=simple
    User=${DEPLOY_USER}
    Group=${DEPLOY_USER}
    WorkingDirectory=${DEPLOY_DIR}
    Environment=NODE_ENV=production
    EnvironmentFile=${DEPLOY_DIR}/.env
    Environment=PATH=/usr/local/bin:/usr/bin:/bin
    ExecStart=\\$NODE_BIN ${DEPLOY_DIR}/${ENTRY_FILE}
    Restart=always
    RestartSec=3

    [Install]
    WantedBy=multi-user.target
    SERVICE

    sudo systemctl daemon-reload
    sudo systemctl enable ${SERVICE_NAME}
    sudo systemctl restart ${SERVICE_NAME}

    # ìƒíƒœ í™•ì¸
    for i in 1 2 3 4 5; do
      sleep 2
      if systemctl is-active --quiet ${SERVICE_NAME}; then
        echo "Service ${SERVICE_NAME} is active."
        exit 0
      fi
    done

    echo "Service ${SERVICE_NAME} failed to become active."
    sudo systemctl status ${SERVICE_NAME} --no-pager -l || true
    exit 1
    EOF
          '''
        }
      }
    }
  }

  post {
    success {
      echo "âœ… Build #${env.BUILD_NUMBER} OK (${env.BRANCH_NAME})"
      echo "ğŸš€ Deployed to ${env.DEPLOY_USER}@${env.DEPLOY_HOST}:${env.DEPLOY_DIR} (systemd: ${env.SERVICE_NAME})"
    }
    failure {
      echo "âŒ Build failed (${env.BRANCH_NAME})"
    }
  }
}
message.txt
7 KB